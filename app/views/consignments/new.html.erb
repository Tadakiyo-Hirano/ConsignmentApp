<% provide(:title, "委託商品登録") %>

<h1>委託商品登録</h1>
<div class="row justify-content-md-center consignment-new-form">
  <div class="col col-md-6 col-md-offset-3">
    <%= form_with(model: @consignment, url: user_consignments_path(@user), local: true) do |f| %>
      <%= f.date_field :ship_date, value: Date.current, placeholder: "#{Consignment.human_attribute_name :ship_date}", class: "form-control" %>
      <%= f.text_field :cuttomer, class: "form-control", id: "input_customer" %>
      <%= button_tag "検索", type: "button", onclick: "func1()" %>
      <%= f.text_field :customer_info, placeholder: "#{Consignment.human_attribute_name :customer_info}", class: "form-control", id: "output_customer" %>
      <%= f.text_field :product_info, placeholder: "#{Consignment.human_attribute_name :product_info}", class: "form-control" %>
      <%= f.number_field :quantity, placeholder: "#{Consignment.human_attribute_name :quantity}", class: "form-control" %>
      <%= f.text_field :serial_number, placeholder: "#{Consignment.human_attribute_name :serial_number}", class: "form-control" %>
      <%= f.text_area :note, placeholder: "#{Consignment.human_attribute_name :note}", class: "form-control" %>
      <div class="btn-field">
        <div class="btn-item">
          <%= f.submit "登録", class: "btn btn-default btn-block" %>
        </div>
        <div class="btn-item">
          <%= link_to "戻る", user_path(@user), class: "btn btn-secondary btn-block" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>

function func1() {
  var input_customer = document.getElementById("input_customer").value;
  
  var customer = ('<%= Customer.find_by(code: "0188868880-00")&.name %>')
  // var customer = ('<= Customer.find_by(code: "0188868880-00")&.name %>')
  document.getElementById("output_customer").value = customer;

}
</script>



<div>
  <%= text_field :cuttomer, "", id: "input" %>
  <%= button_tag "検索", type: "button", onclick: "func2()" %>
  <%= text_field :customer, "", id: "output" %>
</div>

<div id="abc">aaaaaa</div>

<div>
  <% @customers.each do |c| %>
    <p><%= c.code %></p>
    <p id="<%= c.code %>"><%= c.name %></p>
  <% end %>
</div>

<script>
function func2() {
  var input = document.getElementById("input").value;
  
  var test = document.getElementById(input).innerHTML;
  // var customer = ('<= Customer.find_by(code: "0188868880-00")&.name %>')
  document.getElementById("output").value = test;
  // alert(test);
}
</script>





<!--<div class="wrapper">-->
<!--  <div class="search-area">-->
<!--  <form>-->
<!--    <input type="text" id="search-text" placeholder="検索ワードを入力">-->
<!--  </form>-->
<!--  <div class="search-result">-->
<!--    <div class="search-result__hit-num"></div>-->
    <!--<div id="search-result__list"></div>-->
<!--    <= text_field "", class: "form-control", id: "search-result__list" %>-->
<!--  </div>-->
<!--</div>-->

  <!--  <ul class="target-area">-->
  <!--    < @products.each do |a| %>-->
  <!--      <li><= a.code %></li>-->
  <!--    < end %>-->
  <!--    <li>りんご120円</li>-->
  <!--    <li>ばなな100円</li>-->
  <!--    <li>みかん150円</li>-->
  <!--    <li>いちご220円</li>-->
  <!--    <li>すいか500円</li>-->
  <!--  </ul>-->
  <!--</div>-->
  
<!--<script>-->
<!--  searchWord = function(){-->
<!--  var searchResult,-->
      <!--searchText = $(this).val(), // 検索ボックスに入力された値-->
<!--      targetText,-->
<!--      hitNum;-->
 
  <!--// 検索結果を格納するための配列を用意-->
<!--  searchResult = [];-->
 
  <!--// 検索結果エリアの表示を空にする-->
<!--  $('#search-result__list').empty();-->
<!--  $('.search-result__hit-num').empty();-->
 
  <!--// 検索ボックスに値が入ってる場合-->
<!--  if (searchText != '') {-->
<!--    $('.target-area li').each(function() {-->
<!--      targetText = $(this).text();-->
 
      <!--// 検索対象となるリストに入力された文字列が存在するかどうかを判断-->
<!--      if (targetText.indexOf(searchText) != -1) {-->
        <!--// 存在する場合はそのリストのテキストを用意した配列に格納-->
<!--        searchResult.push(targetText);-->
<!--      }-->
<!--    });-->
 
    <!--// 検索結果をページに出力-->
<!--    for (var i = 0; i < searchResult.length; i ++) {-->
<!--      $('<span>').text(searchResult[i]).appendTo('#search-result__list');-->
<!--    }-->
 
    <!--// ヒットの件数をページに出力-->
<!--    hitNum = '<span>検索結果</span>：' + searchResult.length + '件見つかりました。';-->
<!--    $('.search-result__hit-num').append(hitNum);-->
<!--  }-->
<!--};-->
 
<!--// searchWordの実行-->
<!--$('#search-text').on('input', searchWord);-->

<!--</script>-->
