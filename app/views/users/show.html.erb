<% provide(:title, @user.name) %>

<h1>委託商品情報</h1>
<div class="container">
  <div class="col col-md-12 user-menu">
    <table class="table-bordered table-condensed bg-light" width="50%">
      <tr>
        <th class="pc-display"><%= @user.code %></th>
        <th class="pc-display"><%= @user.name %></th>
        <th><%= link_to "新規登録", new_user_consignment_path(@user), class: "btn btn-sm btn-default" %></th>
      </tr>
    </table>
    <br>
    <table class="table-responsive table-bordered table-condensed table-hover bg-light" id="table-products">
      <thead>
        <tr>
          <th>編集</th>
          <th><%= Consignment.human_attribute_name :ship_date %></th>
          <th class="pc-display"><%= Product.human_attribute_name :code %></th>
          <th><%= Product.human_attribute_name :name %></th>
          <th>委託台数</th>
          <th class="pc-display"><%= Consignment.human_attribute_name :serial_number %></th>
          <th class="pc-display"><%= Consignment.human_attribute_name :customer_code %></th>
          <th class="pc-display"><%= Consignment.human_attribute_name :customer_name %></th>
          <th class="pc-display"><%= Consignment.human_attribute_name :note %></th>
        </tr>
      </thead>
      
      <% @user.consignments.decorate.each do |c| %>
        <tbody>
          <tr>
            <td><%= link_to "", user_consignment_path(@user, c), class: "far fa-edit" %></td>
            <td><%= l(c.ship_date, format: :default) %></td>
            <td class="pc-display"><%= product_code(c.product_id_number) %></td>
            <td><%= product_name(c.product_id_number) %></td>
            <td><%= c.quantity %></td>
            <td class="pc-display"><%= c.serial_number %></td>
            <td class="pc-display"><%= customer_code(c.customer_id_number) %></td>
            <td class="pc-display"><%= customer_name(c.customer_id_number) %></td>
            <td class="pc-display"><%= c.note %></td>
          </tr>
        </tbody>
      <% end %>
    </table>
  </div>
</div>
